/*! @name videojs-google-analytics @version 1.0.0 @license MIT */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).videojsGoogleAnalytics=t(e.videojs)}(this,(function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),i={events:[],assetName:"Video",defaultVideoCategory:"Video",defaultAudioCategory:"Audio"},o=n.default.registerPlugin||n.default.plugin,a=function(e,t){e.addClass("vjs-google-analytics");var n=!1,i=0,o=0,a=0,r={quarter:!1,half:!1,threeQuarters:!1};function u(e,n,i,o){var a=t.defaultVideoCategory;e.isAudio()&&(a=t.defaultAudioCategory),i||(i=""),gtag("event",n,{event_category:a,event_label:i,value:o})}function f(e){return t.events.filter((function(t){return t.name===e}))[0]}function d(){n=!1,i=0,o=0,a=0}var l=t.events.map((function(e){return e.name||e}));if(l.indexOf("firstplay")>-1){var s=f("firstplay");e.one("dispose",(function(){d()})),e.one("loadstart",(function(){d(),i=new Date})),e.one("loadeddata",(function(){o=new Date,a=(o-i)/1e3})),e.one("playing",(function(){!function(e,t){n||(n=!0,u(e,t.action,t.label,a.toFixed(3)))}(e,s)})),t.events=t.events.filter((function(e){return"firstplay"!==e.name}))}if(l.indexOf("ended")>-1){var c=f("ended");e.one("ended",(function(){!function(e,t){u(e,t.action,t.label),d()}(e,c)})),t.events=t.events.filter((function(e){return"ended"!==e.name}))}if(l.indexOf("timeupdate")>-1){var v=f("timeupdate");e.on("timeupdate",(function(){!function(e,t){var n=Math.round(e.currentTime()),i=Math.round(e.duration()),o=Math.round(n/i*100);!r.quarter&&o>25&&(u(e,t.action,"Complete 25%"),r.quarter=!0),!r.half&&o>50&&(u(e,t.action,"Complete 50%"),r.half=!0),!r.threeQuarters&&o>75&&(u(e,t.action,"Complete 75%"),r.threeQuarters=!0)}(e,v)})),t.events=t.events.filter((function(e){return"timeupdate"!==e.name}))}if(l.indexOf("watchtime")>-1){var m=f("watchtime");window.addEventListener("beforeunload",(function(t){!function(e,t){var n=Math.round(e.currentTime());u(e,t.action,t.label,n)}(e,m)})),t.events=t.events.filter((function(e){return"watchtime"!==e.name}))}},r=function(e){var t=this;this.ready((function(){a(t,n.default.mergeOptions(i,e))}))};return o("googleAnalytics",r),r.VERSION="1.0.0",r}));
